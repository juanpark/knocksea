<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>자체 회원가입</title>
</head>
<body>
<h1>회원가입</h1>

<form id="login-form">
  <div>
    <label for="email">이메일:</label>
    <input type="email" id="email" name="email" required/>
  </div>
  <div>
    <label for="password">비밀번호:</label>
    <input type="password" id="password" name="password" required/>
  </div>
  <div>
    <label for="name">이름:</label>
    <input type="text" id="name" name="name" required/>
  </div>
  <div>
    <label for="nickname">닉네임:</label>
    <input type="text" id="nickname" name="nickname" required/>
  </div>
  <div>
    <button type="submit">로그인</button>
  </div>
</form>
<script>
  const form = document.getElementById("login-form");

  form.addEventListener("submit", async (e) => {
    e.preventDefault(); // 기본 submit 막기

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const name = document.getElementById("name").value;
    const nickname = document.getElementById("nickname").value;

    const response = await fetch("/register", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ email, password, nickname, name })
    });

    window.location.href="/locallogin";

  });
</script>
</body>
</html>